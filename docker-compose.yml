version: '3.8'

services:
  mediaarr:
    build: .
    image: mediaarr:latest
    container_name: mediaarr
    restart: unless-stopped

    ports:
      - "5000:5000"

    environment:
      # Required: TMDb API Key
      - TMDB_API_KEY=${TMDB_API_KEY}

      # Optional: Folder Configuration
      - MOVIE_FOLDERS=/movies,/kids-movies,/anime
      - TV_FOLDERS=/tv,/kids-tv

      # Optional: Slack Notifications
      - SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL:-}

      # Optional: User/Group IDs (for file permissions)
      - PUID=1000
      - PGID=1000

      # Optional: Server Configuration
      - PORT=5000
      - SECRET_KEY=${SECRET_KEY:-change-this-secret-key}

    volumes:
      # Mount your media folders (adjust paths as needed)
      - /path/to/movies:/movies
      - /path/to/kids-movies:/kids-movies
      - /path/to/anime:/anime
      - /path/to/tv:/tv
      - /path/to/kids-tv:/kids-tv

      # Persistent data for TMDb mapping
      - ./data:/app/data

    user: "${PUID:-1000}:${PGID:-1000}"
